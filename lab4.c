#include <reg52.h>
#include <intrins.h>

#define uchar unsigned char
#define uint unsigned int

uchar code num_code[10][8]=
{
	{0x00,0x3e,0x41,0x41,0x41,0x3e,0x00,0x00}, //0
	{0x00,0x00,0x00,0x21,0x7f,0x01,0x00,0x00}, //1
	{0x00,0x27,0x45,0x45,0x45,0x39,0x00,0x00}, //2
	{0x00,0x22,0x49,0x49,0x49,0x36,0x00,0x00}, //3
	{0x00,0x0c,0x14,0x24,0x7f,0x04,0x00,0x00}, //4
	{0x00,0x72,0x51,0x51,0x51,0x4e,0x00,0x00}, //5
	{0x00,0x3e,0x49,0x49,0x49,0x26,0x00,0x00}, //6
	{0x00,0x40,0x40,0x40,0x4f,0x70,0x00,0x00}, //7
	{0x00,0x36,0x49,0x49,0x49,0x36,0x00,0x00}, //8
	{0x00,0x32,0x49,0x49,0x49,0x3e,0x00,0x00}  //9
};

uchar times = 0;
uchar index,offset = 0;


void init(){
	TMOD = 0x00;
	TH0 = (8192-3000)/32;
	TL0 = (8192-3000)%32;
	EA = 1;
	ET0 = 1;
	//IE =  0x82;
	TR0 = 1;
}


void t0_time() interrupt 1{
	TH0 = (8192-3000)/32;
	TL0 = (8192-3000)%32;
	if(++times == 250){
		times = 0;
		if(++index == 10)
			index = 0;
	}
}

void sleep(uint time){
	uchar t;
	while(time--)
		for(t=120;t>0;t--);
}

void main(void){
	P3 = 0x80;
	init();
	while(1){
		P0 = 0xff;
		P0 = ~num_code[index][offset]; 	
		P3 = _crol_(P3, 1);
		if(++offset == 8){
			offset = 0;
		}
		sleep(5);		
	}
}